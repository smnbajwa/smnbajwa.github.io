<!DOCTYPE html>
<html lang="en">
  <head>
        <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LM9SX5RQS9"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora">
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-LM9SX5RQS9');
    </script>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <title>Self-Balancing Robot</title>
  </head>
  <body>
    <h1>Self-Balancing Robot using Arduino</h1>
    <div class="container">
        <h4><a href="index.html">Home</a></h4>
        <p>Date added: 03 October 2022</p>     
        <p>Status: Ongoing</p>
        <b>Summary:</b>
        <p> This project was heavily inspired by <a href="http://www.brokking.net/yabr_main.html">YABR by Brokking</a>. I am using slightly different hardware and as a result I had to revise his code to get it to work.</p>
        <p>My next step for this project is to program the ATMega328 directly using C rather than using Arduino IDE</p>
        <b>Issues encountered:</b>
        <ol>
        <li>Acrylic sheets were prone to vibration and noisy. It was hard to
           tighten the nuts on them even with washers. The vibrations would
           make the nuts loose. That's why wood is a better choice. It does
           not vibrate and nuts dig into it so they are secured.</li>
        
        <li>Initially I used a breadboard for the circuit. The robot would
          randomly stop and fall over. Turns out that the vibrations made the
          connection between the wire and breadboard intermittent. The
          microcontroller lost power and turned off.<br>
        That's why I decided to solder the components on a DOT PCB.</li>
        
        <li>The inspiration of the robot came from a YouTube I watched.
          I sourced some of same components but not all because I did not
          just want to copy someone else's design as is. As a result the 
          control program would not work as is and I did not have enough
          expertise in C++ to modify it.
        
        <li>I decided to write my own program for the control. I had to take 
        a detour and learn some C++ to be able to do that. It was a mistake 
        as there are no simple libraries I could just use. </li>
        
        <li>The gyro sensor calculates angle of tilt every 4ms. This angle is 
        used
        as error and fed into a PID loop which drives the motors a 
        certain amount to bring the robot back to equilibrium position.</li>
        
        <li>There are existing libraries to control the speed or acceleration of a 
        stepper motor. However, they don't work if I change the speed every 4ms.
        This is because these libraries have functions which call other functions
        in the Arduino library which take much longer time than 4ms.
        
        <li>Also, it is not just the programming knowledge that I needed.
          There are features of AVR microcontrollers that I was unaware of. </li>
        
          <li>I learned that it is possible to change bits on a specific register to 
        drive the motor one step. This is much faster than calling functions 
        provided by the library.</li>
        </ol>
        <h4>Pictures/Video:</h4>
            <div class="media"><figure class="rounded mx-auto d-block"><a href="./images/circuit1.jpg" target="_blank"><img src="./images/circuit1.jpg" alt="Circuit"></a> 
            <figcaption>Fig. 1 - Components soldered on protoboard <br>(1) Arduino Nano (2) MPU6050 (3) A4988 Stepper motor driver x2 <br>(4) DC-DC voltage converter (added later) (5) 100uF Capacitors x2</figcaption>
            </figure>
            <figure><a href="./images/circuit.png" target="_blank"><img src="./images/circuit.png" alt="Circuit diagram"></a> 
              <figcaption>Fig. 2 - Circuit diagram
              </figcaption>
          </figure>
            <figure><a href="./images/chasis.jpg" target="_blank"><img src="./images/chasis.jpg" alt="Chasis"></a> 
                <figcaption>Fig. 3 - Chasis of the Robot
                </figcaption>
            </figure>
            <figure>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/CptsSRe3XCs" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>   
            <figcaption>Fig. 4 - Robot balancing itself</figcaption>
            </figure>
          </div>
        <h4>Code:</h4><a href="https://github.com/smnbajwa/self-balancing-robot">Github repo</a>
        <a id="backtotop" href="#top">Back to top of page</a>
    </div>
  </body>
</html>